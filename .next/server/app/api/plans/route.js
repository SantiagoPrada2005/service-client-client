(()=>{var e={};e.id=382,e.ids=[382],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19771:e=>{"use strict";e.exports=require("process")},20856:(e,s,r)=>{"use strict";r.d(s,{$b:()=>c,Rk:()=>n,S$:()=>a,zU:()=>i});var t=r(32190),o=r(66106);async function n(e,s,r=[]){try{let n=s||`SELECT * FROM ${e}`,a=await (0,o.P)(n,r);return t.NextResponse.json({success:!0,data:a,message:`${e} retrieved successfully`},{status:200})}catch(s){return console.error(`Database query error for ${e}:`,s),t.NextResponse.json({success:!1,message:`Failed to retrieve ${e}`,error:s instanceof Error?s.message:"Unknown error"},{status:500})}}async function a(e,s,r=[],n){try{for(let e of r)if(void 0===s[e])return t.NextResponse.json({success:!1,message:`${e} is required`},{status:400});if(n){let e=n(s);if(!e.isValid)return t.NextResponse.json({success:!1,message:e.message||"Validation failed"},{status:400})}let a=Object.keys(s),i=a.map(()=>"?").join(", "),c=Object.values(s),u=a.map(e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)),p=await (0,o.P)(`INSERT INTO ${e} (${u.join(", ")}) VALUES (${i})`,c),[l]=await (0,o.P)(`SELECT * FROM ${e} WHERE id = ?`,[p.insertId]);return t.NextResponse.json({success:!0,data:l,message:`${e} created successfully`},{status:201})}catch(s){return console.error(`Error creating ${e}:`,s),t.NextResponse.json({success:!1,message:`Error creating ${e}`,error:s instanceof Error?s.message:"Unknown error"},{status:500})}}async function i(e,s,r,n){try{if(!s)return t.NextResponse.json({success:!1,message:"ID is required"},{status:400});if(n){let e=n(r);if(!e.isValid)return t.NextResponse.json({success:!1,message:e.message||"Validation failed"},{status:400})}let a={};Object.entries(r).forEach(([e,s])=>{a[e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)]=s});let i=Object.keys(a).map(e=>`${e} = ?`),c=Object.values(a),u=`UPDATE ${e} SET ${i.join(", ")} WHERE id = ?`,p=await (0,o.P)(u,[...c,s]);if(0===p.affectedRows)return t.NextResponse.json({success:!1,message:`${e} not found`},{status:404});let[l]=await (0,o.P)(`SELECT * FROM ${e} WHERE id = ?`,[s]);return t.NextResponse.json({success:!0,data:l,message:`${e} updated successfully`},{status:200})}catch(s){return console.error(`Error updating ${e}:`,s),t.NextResponse.json({success:!1,message:`Error updating ${e}`,error:s instanceof Error?s.message:"Unknown error"},{status:500})}}async function c(e,s){try{let r;if(!s)return t.NextResponse.json({success:!1,message:"ID is required"},{status:400});try{r=await (0,o.P)(`DELETE FROM ${e} WHERE id = ? RETURNING *`,[s])}catch(a){let[n]=await (0,o.P)(`SELECT id FROM ${e} WHERE id = ?`,[s]);if(!n)return t.NextResponse.json({success:!1,message:`${e} not found`},{status:404});r=await (0,o.P)(`DELETE FROM ${e} WHERE id = ?`,[s])}if(0===r.affectedRows)return t.NextResponse.json({success:!1,message:`${e} not found`},{status:404});return t.NextResponse.json({success:!0,message:`${e} deleted successfully`},{status:200})}catch(s){return console.error(`Error deleting ${e}:`,s),t.NextResponse.json({success:!1,message:`Error deleting ${e}`,error:s instanceof Error?s.message:"Unknown error"},{status:500})}}},25401:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>R,routeModule:()=>x,serverHooks:()=>g,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>E});var t={};r.r(t),r.d(t,{DELETE:()=>m,GET:()=>p,POST:()=>l,PUT:()=>d});var o=r(96559),n=r(48088),a=r(37719),i=r(20856);let c="plans";function u(e){return e.name?void 0!==e.price&&"number"!=typeof e.price?{isValid:!1,message:"Price is required"}:void 0!==e.maxChatbots&&"number"!=typeof e.maxChatbots?{isValid:!1,message:"maxChatbots must be a number"}:void 0!==e.maxMessages&&"number"!=typeof e.maxMessages?{isValid:!1,message:"maxMessages must be a number"}:{isValid:!0}:{isValid:!1,message:"Name is required"}}async function p(){return(0,i.Rk)(c)}async function l(e){let s=await e.json();return(0,i.S$)(c,s,["name","price","maxChatbots","maxMessages"],u)}async function d(e){let{id:s,...r}=await e.json();return(0,i.zU)(c,s,r,u)}async function m(e){let{id:s}=await e.json();return(0,i.$b)(c,s)}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/plans/route",pathname:"/api/plans",filename:"route",bundlePath:"app/api/plans/route"},resolvedPagePath:"/Users/santiagopradamoreno/Documents/ServiceClient/service-client-client/src/app/api/plans/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:f,workUnitAsyncStorage:E,serverHooks:g}=x;function R(){return(0,a.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:E})}},27910:e=>{"use strict";e.exports=require("stream")},28303:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=28303,e.exports=s},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},41204:e=>{"use strict";e.exports=require("string_decoder")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66106:(e,s,r)=>{"use strict";r.d(s,{P:()=>p});var t=r(46101),o=r(33873),n=r.n(o);let a=require("fs");var i=r.n(a);let c={host:process.env.DB_HOST||"localhost",user:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"",database:process.env.DB_NAME||"serviceClientAIDB",port:parseInt(process.env.DB_PORT||"3306"),waitForConnections:!0,connectionLimit:10,queueLimit:0,ssl:{ca:i().readFileSync(n().join(process.cwd(),"server-ca.pem")),key:i().readFileSync(n().join(process.cwd(),"client-key.pem")),cert:i().readFileSync(n().join(process.cwd(),"client-cert.pem"))}};console.log("Ruta Path: ",process.cwd());let u=null;async function p(e,s=[]){try{let[r]=await (u||(console.log("Creando pool de conexiones"),u=t.createPool(c)),u).execute(e,s);return r}catch(e){throw console.error("Error en la consulta SQL:",e),e}}},66136:e=>{"use strict";e.exports=require("timers")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,580,101],()=>r(25401));module.exports=t})();